{% extends "src/views/layout.html" %}

{% set title="Amata" %}

{% macro carouselItem(index, imageLink, siteLink, nameChinese, nameEnglish, location1, location2) %}
<div id="slide{{ index }}" class="carousel-item relative flex flex-col w-full">
    <div class="flex-grow m-2 overflow-hidden pt-0 rounded-3xl">
        <div class="relative h-full w-full">
            <img class="aspect-auto min-h-full object-center object-cover" src="{{ imageLink }}">
            <div class="absolute flex justify-between transform -translate-y-1/2 left-5 right-5 top-1/2">
                <a id="prev-link-{{ index }}" href="#slide{{ index - 1 }}" class="btn btn-circle">❮</a>
                <a id="next-link-{{ index }}" href="#slide{{ index + 1 }}" class="btn btn-circle">❯</a>
            </div>
        </div>
    </div>
    <div class="m-3">
        <a class="hover:underline font-semibold font-serif mb-3 text-2xl" href="{{ siteLink }}">{{ nameChinese }}<br />{{ nameEnglish }}</a>
        <p class="font-serif text-xl">{{ location1 }}</p>
        <p class="font-serif italic text-xl">{{ location2 }}</p>
    </div>
</div>
{% endmacro %}

{% block content %}
<div id="carousel" class="carousel max-h-[850px] w-full">
    {{
        carouselItem(1, '../images/hsiuying 1.jpg', 'https://amatavihara.org', '醍醐寺', 'Amata Meditation Center', 'Boyds, Maryland', 'USA')
    }}
    {{
        carouselItem(2, '../images/uszen_exterior_day.jpg', 'https://uszen.org', '美國禪學講堂', 'US Zen Institute', 'Germantown, Maryland', 'USA')
    }}
    {{
        carouselItem(3, '../images/ed3fca_bff95a3760314a24a0dce6b75f44a29e~mv2_d_4730_2660_s_4_2.jpg', 'https://en.mkmeditationc.com', '神山禪修中心', 'Mount Kinabalu Meditation Centre', 'Kundasang, Sabah', 'Malaysia')
    }}
    {{
        carouselItem(4, '../images/20230211_p_20.jpg', 'https://asj.org.tw', '中華習禪會', 'The Association of Sino Jhāyin', 'Zhongpu, Chiayi', 'Taiwan')
    }}
    {{
        carouselItem(5, '../images/TB202312311558.jpg', 'http://noble-silence.org', '聖默禪院', 'Sheng Mo Temple Meditation Center', 'Gukeng, Yunling', 'Taiwan')
    }}
</div>
{% endblock %}

{% block scripts %}
<script>
    const nodes = Array.from(carousel.childNodes).filter(c => c.nodeType != 3)
    document.getElementById("prev-link-1").href = `#slide${nodes.length}`
    document.getElementById(`next-link-${nodes.length}`).href = '#slide1'
</script>
{% endblock %}